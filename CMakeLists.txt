cmake_minimum_required(VERSION 3.0)

project(DungeonDave)

# So that editors can use info generated by CMake.
set(CMAKE_EXPORT_COMPILE_COMMANDS "ON")

########## Setting the C standard, warning flags, and debug/release flags.

set(CMAKE_C_STANDARD 99)
set(CMAKE_C_STANDARD_REQUIRED TRUE)

set(CONVERSION_WARNINGS_1 "-Wfloat-conversion -Wdouble-promotion -Wsign-conversion")
set(CONVERSION_WARNINGS_2 "-Wimplicit-int-conversion -Wshorten-64-to-32 -Wincompatible-pointer-types")
set(CMAKE_C_FLAGS "-Wall -Wextra -Wpedantic -Wformat ${CONVERSION_WARNINGS_1} ${CONVERSION_WARNINGS_2}")

set(CMAKE_C_FLAGS_DEBUG "-g -fsanitize=address,undefined,float-divide-by-zero,unsigned-integer-overflow,implicit-conversion")
set(CMAKE_C_FLAGS_RELEASE "-Ofast")

########## Declaring SDL2 and OpenAL as packages, and other standard CMake boilerplate.

find_package(SDL2 REQUIRED)
find_package(OpenAL REQUIRED)

file(GLOB_RECURSE SRC_FILES src/*.c)

add_executable(dungeon_dave ${SRC_FILES})

target_include_directories(dungeon_dave PRIVATE ${CMAKE_CURRENT_SOURCE_DIR}/include ${SDL2_INCLUDE_DIRS} ${OPENAL_INCLUDE_DIR})
target_link_libraries(dungeon_dave ${SDL2_LIBRARIES} ${OPENAL_LIBRARY})

##########
